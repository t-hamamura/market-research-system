# AI Market Research System

[![AI Powered](https://img.shields.io/badge/AI-Gemini%20Powered-4A90C2?style=for-the-badge)]()
[![Database](https://img.shields.io/badge/Database-Notion%20API-000000?style=for-the-badge&logo=notion)]()
[![Framework](https://img.shields.io/badge/Framework-Node.js-339933?style=for-the-badge&logo=node.js)]()

**＼ 事業の可能性を、データで見極める ／**

最先端のAI市場調査自動化システム。わずか数分で、16種類の本格的な市場調査が完了。

Gemini AIとNotion APIを活用して、専門的な市場調査を並列実行し、構造化されたビジネス分析レポートをNotion上に自動生成する高度なソリューションです。

---

## 🎯 システム概要

### 🚀 最新の改善機能（v1.1.0）
- **🎨 洗練されたUI**: モダンで直感的なユーザーインターフェース、グラデーション効果とスムーズアニメーション
- **📋 一括入力機能**: テンプレートを使用したワンクリック情報入力、トグル表示で必要な時だけ利用可能
- **📊 リアルタイム進行状況**: 各調査項目の詳細な進行状況表示（未着手・実行中・完了・失敗）
- **⏰ 高精度時間予測**: 複数の予測手法を組み合わせたスマートな完了時間計算
- **🔄 インテリジェント再開**: 途中で停止した調査を正確なステップから再開可能

### 核心機能
- **🤖 AI駆動型分析**: Gemini AIが、指定されたサービス仮説に基づき16種類の市場調査を自動実行。
- **⚡ 高速な並列処理**: 複数の調査をバッチで並列実行し、調査時間を大幅に短縮（従来比3倍以上）。
- **📊 構造化レポート**: AIの応答を単なるマークダウンではなく、Notionに最適化された**構造化JSON**として生成。トグルリストやコールアウトなどを活用した、視覚的で分かりやすいレポートを作成します。
- **📋 リアルタイム保存**: 各調査の完了ごとに、結果を個別のNotionページとして即座に保存。
- **🛡️ 高度なエラー耐性**: APIのレート制限やネットワークエラーに対応する自動リトライ機能、途中から調査を再開できるチェックポイント機能などを搭載。
- **🎨 直感的なUI**: 美しく使いやすいユーザーインターフェース、リアルタイムフィードバック付き。

### 対象ユーザー
- **事業企画・開発者**: 新規事業のアイデア検証や市場参入戦略の策定に。
- **経営層・マネージャー**: データに基づいた迅速な意思決定のための情報収集に。
- **コンサルタント**: クライアント向けの市場分析レポート作成の効率化に。
- **スタートアップ・起業家**: 投資家向け資料作成や、MVP開発前の市場調査に。

---

## ✨ 主要機能

### 🎯 スマートな一括入力
- **テンプレート自動生成**: ワンクリックでサービス仮説のテンプレートをコピー
- **インテリジェント解析**: 自由形式のテキストを各フィールドに自動分類
- **トグル式表示**: 必要な時だけ表示される、画面を圧迫しないデザイン
- **リアルタイム検証**: 入力内容の妥当性を即座にチェック

### 📊 詳細な進行状況表示
各調査項目の状態をリアルタイムで視覚化：
- **⏳ 未着手**: グレーアイコンで待機状態を表示
- **🔄 実行中**: アニメーション付きブルーアイコンと進行状況バー
- **✅ 完了**: グリーンアイコンで成功を明示
- **❌ 失敗**: レッドアイコンでエラー状態を表示

### ⏰ 高精度時間予測システム
複数の予測アルゴリズムを組み合わせた次世代時間計算：
- **線形予測**: 従来の進行率ベース計算
- **フェーズベース予測**: 各調査フェーズの特性を考慮
- **適応的予測**: 実際の実行時間から学習する自己改善型
- **スマート表示**: 残り10秒以下で「まもなく完了」を正確に表示

### Notionに最適化されたレポート出力
本システムの最大の特徴は、AIの生成結果をNotionのブロック構造に最適化された**構造化JSON**で出力させる点にあります。これにより、以下のような高品質なレポートが自動生成されます。

- **📄 統合レポートページ**: 全16種類の調査結果を統合し、要約と詳細な分析を含む包括的なレポートを1ページに生成。
- **📂 個別調査ページ（トグル形式）**: 統合レポート内では、各調査結果が**トグルリスト**に格納されます。これにより、レポートの全体像を把握しやすく、興味のある項目だけを展開して詳細を確認できます。
- **✨ リッチな表現力**: **コールアウトブロック**による重要事項のハイライト、色分けされた**見出し**、**箇条書き**などを活用し、可読性の高いドキュメントを生成します。

---

## 🔬 調査機能詳細

### 16種類の専門調査項目
ビジネス分析に必要なフレームワークを網羅した、16の調査項目を自動で実行します。

1.  **市場規模と成長性の調査** - 市場規模・成長予測分析
2.  **PESTEL分析** - 政治・経済・社会・技術・環境・法的要因
3.  **競合製品・戦略分析** - 競合他社の製品特徴・戦略
4.  **競合経営戦略・離脱分析** - 競合戦略変遷・顧客離脱理由
5.  **顧客セグメント・意思決定分析** - ターゲット顧客・購買プロセス
6.  **顧客感情・潜在ニーズ分析** - 顧客インサイト・情報収集行動
7.  **プロダクト市場適合性・価格戦略** - PMF評価・価格設定分析
8.  **マーケティング戦術分析** - 最適チャネル・コンテンツ戦略
9.  **ブランドポジショニング** - ブランド戦略・コミュニケーション
10. **テクノロジー・セキュリティ分析** - 技術動向・リスク対策
11. **パートナーシップ戦略** - 提携先・エコシステム形成
12. **リスク・シナリオ分析** - リスク評価・対応策設計
13. **KPI・測定方法設計** - 成功指標・測定体制構築
14. **法務・コンプライアンス分析** - 法的リスク・規制対応
15. **効果的リサーチ手法提案** - 調査方法論・計画設計
16. **PMF前特化リサーチ設計** - MVP設計・仮説検証手法

---

## 🚀 クイックスタート

### 前提条件
- Node.js (v18以上推奨)
- `npm` or `yarn`
- Gemini API Key
- Notion Integration Token & Database ID

### セットアップ手順

1.  **リポジトリのクローン**
    ```bash
    git clone https://github.com/t-hamamura/market-research-system.git
    cd market-research-system
    ```

2.  **依存関係のインストール**
    ```bash
    npm install
    ```

3.  **環境変数の設定**
    `.env.example`をコピーして`.env`ファイルを作成します。
    ```bash
    cp env.example .env
    ```
    `.env`ファイルに必要な情報を入力してください。
    ```env
    # 必須設定
    GEMINI_API_KEY="your_gemini_api_key_here"
    NOTION_TOKEN="your_notion_integration_token"
    NOTION_DATABASE_ID="your_notion_database_id"
    NODE_ENV="production"
    PORT=3000

    # パフォーマンス最適化（任意）
    PARALLEL_BATCH_SIZE=4
    BATCH_INTERVAL=2000
    RESEARCH_INTERVAL=2000
    ```

4.  **ビルド & 起動**
    ```bash
    npm run build
    npm start
    ```

5.  **アクセス**
    ブラウザで `http://localhost:3000` を開きます。

---

## 💡 使用方法

### 基本的な流れ

1. **事業情報の入力**
   - 事業名・サービス名を入力
   - サービス仮説の必須項目（5項目）を入力
   - 必要に応じて詳細情報（7項目）も入力

2. **一括入力の活用（オプション）**
   - 「一括入力を使用する」ボタンをクリック
   - 「テンプレートをコピー」で雛形を取得
   - 自由形式でテキストを入力し「一括入力を解析」で自動分類

3. **AI市場調査の実行**
   - 「AI市場調査を開始する」ボタンをクリック
   - リアルタイムで進行状況を確認
   - 各調査項目の詳細な状態を監視

4. **結果の確認**
   - 完了後、Notionページで詳細なレポートを確認
   - 統合分析レポートと16個の個別調査結果を取得

---

## 🏗️ システム構成

### アーキテクチャ
アーキテクチャの中心は、AIの応答を構造化JSONとして受け取り、それを確定的なNotionブロックに変換するバックエンドエンジンです。

```
┌─────────────────┐      ┌───────────────────────────┐      ┌─────────────────┐
│                 │      │     Backend (Node.js)     │      │  External APIs  │
│ Frontend (UI)   │◄─────►│ ┌───────────────────────┐ │◄─────►│ - Gemini AI     │
│ - 一括入力      │      │ │ JSON-to-Notion Engine │ │      │ - Notion API    │
│ - 進行状況表示  │      │ │ - 高精度時間予測      │ │      │                 │
│ - リアルタイム  │      │ │ - インテリジェント    │ │      │                 │
│   フィードバック│      │ │   再開機能            │ │      │                 │
└─────────────────┘      │ └───────────────────────┘ │      └─────────────────┘
                          └───────────────────────────┘
```

### 技術スタック
- **Frontend**: HTML5, CSS3, Vanilla JavaScript (ES6+)
- **Backend**: Node.js, TypeScript, Express.js
- **AI Engine**: Google Gemini 2.5 Flash
- **Database**: Notion API
- **UI Framework**: Pure CSS with advanced animations
- **推奨デプロイ環境**: Railway, Heroku, Vercel

### 新機能の技術詳細
- **一括入力解析**: 自然言語処理による自動フィールド分類
- **進行状況表示**: WebSocket代替のServer-Sent Events使用
- **時間予測AI**: 機械学習アルゴリズムによる動的時間計算
- **UI/UX**: CSS Grid、Flexbox、カスタムアニメーション

---

## 🛠️ 開発者ガイド

### 開発コマンド
- **開発モードで起動**: `npm run dev`
- **プロダクションビルド**: `npm run build`
- **サーバー起動**: `npm start`
- **テスト実行**: `npm run test`

### ディレクトリ構成
```
/
├── src/
│   ├── server.ts                 # Expressサーバーのメインファイル
│   ├── services/
│   │   ├── geminiService.ts      # Gemini AIとの連携（高精度時間予測対応）
│   │   ├── notionService.ts      # Notion APIとの連携（JSON-to-Block変換エンジン）
│   │   ├── researchService.ts    # 16種類の調査を統括するコアエンジン
│   │   └── deepResearchService.ts # Deep Research機能
│   ├── routes/
│   │   └── research.ts           # APIエンドポイントの定義
│   └── types/
│       └── index.ts              # グローバルな型定義
├── public/
│   ├── index.html                # フロントエンドUI（一括入力機能付き）
│   ├── style.css                 # 改良されたスタイルシート
│   └── script.js                 # 進行状況・時間予測機能付きJS
└── README.md                     # このファイル
```

---

## 🔧 API仕様

### 主要エンドポイント

| エンドポイント | メソッド | 説明 |
|:---|:---|:---|
| `/api/research/start` | POST | 市場調査の開始（SSE対応） |
| `/api/research/health` | GET | システムヘルスチェック |
| `/api/research/prompts` | GET | 調査プロンプト一覧取得 |
| `/api/research/validate` | POST | リクエストバリデーション |
| `/api/research/info` | GET | システム情報取得 |

### リクエスト例
```json
{
  "businessName": "ConvoPulse",
  "serviceHypothesis": {
    "concept": "営業チームの会話データを分析し、成約率向上のためのインサイトを提供するSaaS",
    "customerProblem": "営業チームの商談内容が属人化しており、成約率向上のためのノウハウが蓄積・共有されていない",
    "targetIndustry": "SaaS企業、IT企業、コンサルティング業界の営業部門",
    "targetUsers": "営業マネージャー、営業部長、営業オペレーション担当者",
    "competitors": "直接競合: Gong、Chorus、間接競合: Salesforce、HubSpot"
  },
  "resumeFromStep": 5
}
```

---

## 🤝 コントリビューション

### 開発への参加
バグ報告、機能要望、Pull Requestはいつでも歓迎します。

### 課題・改善案の報告
- [Issues](https://github.com/t-hamamura/market-research-system/issues)から報告してください
- UI/UXの改善提案も歓迎です

### Pull Request
1. フォークしてください
2. フィーチャーブランチを作成してください (`git checkout -b feature/新機能`)
3. 変更をコミットしてください (`git commit -am '新機能を追加'`)
4. ブランチにプッシュしてください (`git push origin feature/新機能`)
5. Pull Requestを作成してください

---

## 🚀 今後の開発予定

- **🤖 カスタムAIモデル**: 市場調査特化型のファインチューニング
- **📱 モバイルアプリ**: iOS/Android対応のネイティブアプリ
- **🔗 他ツール連携**: Slack、Teams、Google Driveとの連携
- **📊 ダッシュボード機能**: 調査結果の可視化・分析機能
- **🌐 多言語対応**: 英語・中国語・韓国語での市場調査

---

## 📄 ライセンス

This project is licensed under the MIT License.

## 📞 サポート

ご質問やサポートが必要な場合は、[Issues](https://github.com/t-hamamura/market-research-system/issues)またはメールでお気軽にお問い合わせください。 