<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>市場調査システム | SPIRITS</title>
    <meta name="description" content="Gemini AIとNotionを活用した高度な市場調査自動化システム - 16種類の専門的な調査を一括実行">
    
    <!-- キャッシュ無効化メタタグ -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <link rel="stylesheet" href="style.css?v=20250629_07">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📊</text></svg>">
</head>
<body>
    <!-- SPIRITSブランドヘッダー -->
    <header class="spirits-header">
        <div class="spirits-header-content">
            <a href="#" class="spirits-logo">
                <span>市場調査</span>
            </a>
            <div class="spirits-tagline">AI Market Research System</div>
        </div>
    </header>

    <!-- メインコンテナ -->
    <div class="main-container">
        <!-- ヒーローセクション -->
        <section class="hero-section">
            <h1 class="hero-title">
                AI市場調査システム
            </h1>
            <p class="hero-subtitle">
                Gemini AI × Notion 連携による高度な市場分析
            </p>
            <p class="hero-description">
                16種類の専門的な市場調査を自動実行し、包括的なレポートをNotion上に生成
            </p>
        </section>

        <!-- システム状態表示 -->
        <div class="system-status" id="systemStatus">
            <div class="status-content">
                <div class="status-indicator" id="statusIndicator"></div>
                <span id="statusMessage">システム確認中...</span>
            </div>
        </div>

        <!-- ローディングオーバーレイ -->
        <div id="loadingOverlay" class="loading-overlay hidden">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <p id="loadingMessage">読み込み中...</p>
            </div>
        </div>

        <!-- フォーム全体のセクション -->
        <section id="formSection" class="form-section">
            <div class="form-container">
                <div class="form-header">
                    <h2>📝 事業情報入力</h2>
                    <p>この事業名がNotionレポートのタイトルになります。まず最初にご入力ください。</p>
                </div>

                <!-- バリデーションエラー表示 -->
                <div id="validationErrors" class="validation-errors hidden">
                    <!-- エラーメッセージがここに表示されます -->
                </div>

                <form id="researchForm" class="research-form">
                    <!-- 事業名 -->
                    <div class="form-group">
                        <label for="businessName" class="form-label required">
                            事業名・サービス名 <span class="required-mark">*</span>
                        </label>
                        <input type="text" id="businessName" name="businessName" class="form-input" 
                               placeholder="例: ConvoPulse" required>
                        <p class="form-hint">Notionページのタイトルとして使用されます</p>
                    </div>

                    <!-- サービス仮説セクション -->
                    <div class="form-section-header">
                        <h3>🔍 サービス仮説</h3>
                        <p>以下の項目について、現在の仮説・構想をご入力ください。</p>
                    </div>

                    <!-- 必須項目 -->
                    <div class="required-section">
                        <h4 class="section-title">必須項目</h4>
                        
                        <div class="form-group">
                            <label for="concept" class="form-label required">
                                コンセプト <span class="required-mark">*</span>
                            </label>
                            <textarea id="concept" name="concept" class="form-textarea" rows="3" 
                                      placeholder="例: 営業チームの会話データを分析し、成約率向上のためのインサイトを提供するSaaS" required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="customerProblem" class="form-label required">
                                解決したい顧客課題 <span class="required-mark">*</span>
                            </label>
                            <textarea id="customerProblem" name="customerProblem" class="form-textarea" rows="3" 
                                      placeholder="例: 営業チームの商談内容が属人化しており、成約率向上のためのノウハウが蓄積・共有されていない" required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="targetIndustry" class="form-label required">
                                狙っている業種・業界 <span class="required-mark">*</span>
                            </label>
                            <textarea id="targetIndustry" name="targetIndustry" class="form-textarea" rows="2" 
                                      placeholder="例: SaaS企業、IT企業、コンサルティング業界の営業部門" required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="targetUsers" class="form-label required">
                                想定される利用者層 <span class="required-mark">*</span>
                            </label>
                            <textarea id="targetUsers" name="targetUsers" class="form-textarea" rows="3" 
                                      placeholder="例: 営業マネージャー、営業部長、営業オペレーション担当者、営業メンバー（50名規模以下の企業）" required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="competitors" class="form-label required">
                                直接競合・間接競合 <span class="required-mark">*</span>
                            </label>
                            <textarea id="competitors" name="competitors" class="form-textarea" rows="3" 
                                      placeholder="例: 直接競合: Gong、Chorus、間接競合: Salesforce、HubSpot、従来の手法: Excel管理、手動レポート" required></textarea>
                        </div>
                    </div>

                    <!-- 任意項目 -->
                    <div class="optional-section">
                        <h4 class="section-title">詳細情報（任意）</h4>
                        <p class="section-description">より詳細な分析のために、以下の情報もご入力いただけます</p>
                        
                        <div class="form-group">
                            <label for="revenueModel" class="form-label">課金モデル</label>
                            <textarea id="revenueModel" name="revenueModel" class="form-textarea" rows="2" 
                                      placeholder="例: 月額SaaS、ユーザー課金、従量課金"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="pricingDirection" class="form-label">価格帯・価格設定の方向性</label>
                            <textarea id="pricingDirection" name="pricingDirection" class="form-textarea" rows="2" 
                                      placeholder="例: 月額5,000円〜50,000円、競合比較で中価格帯を狙う"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="uvp" class="form-label">暫定UVP（独自価値提案）</label>
                            <textarea id="uvp" name="uvp" class="form-textarea" rows="3" 
                                      placeholder="例: 日本語特化の会話分析、導入・運用の簡単さ、中小企業向けの価格設定"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="initialKpi" class="form-label">初期KPI</label>
                            <textarea id="initialKpi" name="initialKpi" class="form-textarea" rows="2" 
                                      placeholder="例: 月次継続率85%以上、導入後3ヶ月で成約率10%向上"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="acquisitionChannels" class="form-label">獲得チャネル仮説</label>
                            <textarea id="acquisitionChannels" name="acquisitionChannels" class="form-textarea" rows="2" 
                                      placeholder="例: LinkedIn広告、展示会、パートナー経由、コンテンツマーケティング"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="regulatoryTechPrereqs" class="form-label">規制・技術前提</label>
                            <textarea id="regulatoryTechPrereqs" name="regulatoryTechPrereqs" class="form-textarea" rows="2" 
                                      placeholder="例: 個人情報保護法対応、クラウドセキュリティ、API連携要件"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="costStructure" class="form-label">想定コスト構造</label>
                            <textarea id="costStructure" name="costStructure" class="form-textarea" rows="2" 
                                      placeholder="例: 人件費60%、AI API費用20%、インフラ費用10%、その他10%"></textarea>
                        </div>
                    </div>

                    <!-- 一括入力機能 -->
                    <div class="bulk-input-section">
                        <h4 class="section-title">📋 一括入力機能</h4>
                        <p class="section-description">事前に用意したテキストがある場合、一括で入力できます</p>
                        
                        <div class="bulk-input-actions">
                            <button type="button" id="copyTemplateBtn" class="btn btn-outline">テンプレートをコピー</button>
                            <button type="button" id="bulkParseBtn" class="btn btn-outline">一括入力を解析</button>
                            <button type="button" id="clearBulkBtn" class="btn btn-outline">クリア</button>
                        </div>
                        
                        <div class="form-group">
                            <label for="bulkInput" class="form-label">一括入力テキスト</label>
                            <textarea id="bulkInput" name="bulkInput" class="form-textarea" rows="8" 
                                      placeholder="テンプレートをコピーしてから、各項目に情報を入力してください..."></textarea>
                            <div id="bulkValidation" class="bulk-validation hidden"></div>
                        </div>
                    </div>

                    <!-- 送信ボタン -->
                    <div class="form-submit">
                        <button type="submit" id="submitButton" class="btn btn-primary">
                            <span class="btn-icon">🚀</span>
                            <span class="btn-text">最初から再実行</span>
                        </button>
                        <p class="submit-note">16種類の市場調査を自動実行し、Notionページに結果をまとめます</p>
                    </div>
                </form>
            </div>
        </section>

        <!-- 進行状況表示セクション -->
        <section class="progress-section hidden" id="progressSection">
            <div class="progress-container">
                <div class="progress-header">
                    <h2>🔄 市場調査実行中</h2>
                    <div class="progress-stats">
                        <span id="progressCounter">0/18</span>
                        <span id="estimatedTime">予想残り時間: 計算中...</span>
                    </div>
                </div>

                <!-- 全体進行状況 -->
                <div class="progress-overall">
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                    <div class="progress-percentage" id="progressPercentage">0%</div>
                </div>

                <!-- フェーズ情報 -->
                <div class="phase-info">
                    <div class="phase-header">
                        <h3 id="currentPhaseText">フェーズ1: 基本調査</h3>
                        <span id="phaseCounter">1/4</span>
                    </div>
                    <p id="phaseDescription">市場規模、競合分析、顧客分析などの基本調査を実行中...</p>
                </div>

                <!-- 調査項目一覧 -->
                <div class="research-items">
                    <h4>調査項目</h4>
                    <div class="research-grid">
                        <div class="research-item pending" data-research-id="1">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>市場規模と成長性</h5>
                                <p>市場規模調査</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="2">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>PESTEL分析</h5>
                                <p>外部環境分析</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="3">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>競合製品・戦略分析</h5>
                                <p>競合分析</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="4">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>顧客セグメント分析</h5>
                                <p>ターゲット分析</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="5">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>価格戦略分析</h5>
                                <p>価格設定分析</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="6">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>流通・販売チャネル分析</h5>
                                <p>チャネル戦略</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="7">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>顧客体験・UI/UX分析</h5>
                                <p>UX分析</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="8">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>マーケティング戦術分析</h5>
                                <p>マーケティング戦略</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="9">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>ブランドポジショニング</h5>
                                <p>ブランド戦略</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="10">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>テクノロジートレンド</h5>
                                <p>技術動向分析</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="11">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>パートナーシップ戦略</h5>
                                <p>提携戦略</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="12">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>リスク・シナリオ分析</h5>
                                <p>リスク評価</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="13">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>KPI・測定方法</h5>
                                <p>KPI設計</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="14">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>法務・コンプライアンス</h5>
                                <p>法的リスク分析</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="15">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>リサーチ手法提案</h5>
                                <p>調査方法論</p>
                            </div>
                        </div>
                        <div class="research-item pending" data-research-id="16">
                            <div class="research-item-icon">⏳</div>
                            <div class="research-item-content">
                                <h5>PMF前特化リサーチ</h5>
                                <p>MVP設計</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 結果表示セクション -->
        <section class="result-section hidden" id="resultSection">
            <div class="result-container">
                <div class="result-header">
                    <h2 id="resultTitle">🎉 市場調査完了！</h2>
                    <p id="resultDescription">市場調査が完了しました。詳細な結果をNotionページでご確認ください。</p>
                </div>
                
                <div class="result-content">
                    <div class="notion-link-container">
                        <a id="notionLink" href="#" target="_blank" class="notion-link">
                            <div class="notion-icon">📊</div>
                            <div class="notion-text">
                                <h3>Notionで結果を確認</h3>
                                <p>16種類の詳細な市場調査結果と統合分析レポート</p>
                            </div>
                            <div class="notion-arrow">→</div>
                        </a>
                    </div>
                    
                    <div class="result-actions">
                        <button id="newResearchButton" class="btn btn-primary">
                            <span class="btn-icon">🔄</span>
                            <span class="btn-text">新しい調査を開始</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- エラー表示セクション -->
        <section class="error-section hidden" id="errorSection">
            <div class="error-container">
                <div class="error-header">
                    <h2>❌ エラーが発生しました</h2>
                </div>
                
                <div class="error-content">
                    <div class="error-message" id="errorMessage">
                        <!-- エラーメッセージがここに表示されます -->
                    </div>
                    
                    <div class="error-actions">
                        <button id="retryButton" class="btn btn-primary">
                            <span class="btn-icon">🔄</span>
                            <span class="btn-text">最初から再実行</span>
                        </button>
                        <button id="resetButton" class="btn btn-outline">
                            <span class="btn-icon">🏠</span>
                            <span class="btn-text">最初に戻る</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- JavaScript -->
    <script src="script.js?v=20250629_07"></script>
</body>
</html> 